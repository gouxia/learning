<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
      <button onclick="testGet()">GET请求</button>
      <button onclick="testPost()">POST请求</button>
      <button onclick="testPut()">PUT请求</button>
      <button onclick="testDelete()">DELETE请求</button>
    </div>
    <script src="https://cdn.bootcss.com/axios/0.19.0/axios.js"></script>
    <!-- <script src="https://unpkg.com/axios/dist/axios.min.js"></script> -->
    <script>
      //     指定默认配置,也就是基础路径
      //     `baseURL` 将自动加在 `url` 前面，除非 `url` 是一个绝对 URL。
      //    它可以通过设置一个 `baseURL` 便于为 axios 实例的方法传递相对 URL
      axios.defaults.baseURL = "http://localhost:3000";

      // 1.GET请求：从服务器段获取数据
      function testGet() {
        //axios.get("http://localhost:3000/posts?id=1")
        axios({
          url: "/posts",
          // `params` 是即将与请求一起发送的 URL 参数
          // 必须是一个无格式对象(plain object)或 URLSearchParams 对象
          params: {
            id: 1,
          },
        }).then((response) => {
          console.log("/posts get", response.data);
        });
      }
      // 2.POST请求：向服务器端添加新数据
      function testPost() {
        axios;
        // .get("http://localhost:3000/posts", {title: "json-serve...",author: "typicode3",})
        axios({
          // `url` 是用于请求的服务器 URL
          url: "/posts",
          // `method` 是创建请求时使用的方法
          method: "post",
          // `data` 是作为请求主体被发送的数据
          // 只适用于这些请求方法 'PUT', 'POST', 和 'PATCH'
          // 在没有设置 `transformRequest` 时，必须是以下类型之一：
          // - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams
          // - 浏览器专属：FormData, File, Blob
          // - Node 专属： Stream
          data: {
            title: "json-server3",
            author: "typicode3",
          },
        }).then((response) => {
          console.log("/posts post", response.data);
        });
      }
      // 3.PUT请求：更新服务器端已经数据
      function testPut() {
        // axios
        //   .get("http://localhost:3000/posts/4", {
        //     title: "json-server4",
        //     author: "typicode4",
        //   })
        axios({
            url: "/posts/4",
            method: "put",
            data: {
            title: "json-server4",
            author: "typicode4",
          },
        })
          .then((response) => {
            console.log("/posts put", response.data);
          });
      }
      // 4.DELETE请求：删除服务器端数据
      function testDelete() {
        //axios.get("http://localhost:3000/posts/3")
        axios({
            url: "/posts/5",
            method: "delete",
            data: {
            title: "json-server5",
            author: "typicode5",
          },
        })
        .then((response) => {
          console.log("/posts delete", response.data);
        });
      }
    </script>
  </body>
</html>
